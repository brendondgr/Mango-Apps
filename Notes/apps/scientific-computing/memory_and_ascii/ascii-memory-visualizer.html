<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Memory Visualizer - How Computers Store Text</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: #FEFBF6;
            color: #333;
            padding: 20px;
            min-height: 100vh;
            overflow-x: auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            background: white;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4C3BCF 0%, #a855f7 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
        }

        .content {
            padding: 30px;
            display: grid;
            gap: 30px;
            grid-template-columns: 1fr;
        }

        @media (min-width: 768px) {
            .content {
                grid-template-columns: 1fr 1fr;
            }
        }

        .input-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-group {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .input-group:focus-within {
            border-color: #4C3BCF;
            box-shadow: 0 0 0 3px rgba(76, 59, 207, 0.1);
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 10px;
            color: #4a5568;
            font-size: 0.95rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1.2rem;
            font-family: 'DM Sans', monospace;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4C3BCF;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .toggle-btn {
            padding: 12px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'DM Sans', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }

        .toggle-btn.active {
            background: #4C3BCF;
            color: white;
            border-color: #4C3BCF;
        }

        .toggle-btn:hover {
            border-color: #4C3BCF;
        }

        .memory-view {
            position: relative;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }

        @media (max-width: 767px) {
            .memory-grid {
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
                gap: 6px;
            }
        }

        .memory-cell {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
            min-height: 80px;
        }

        .memory-cell:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .memory-cell.used {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }

        .memory-cell.char {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e40af;
        }

        .memory-cell.binary {
            font-family: 'DM Sans', monospace;
            font-size: 0.75rem;
            line-height: 1.1;
            color: #1e293b;
        }

        .memory-cell.hex {
            font-family: 'DM Sans', monospace;
            font-size: 1rem;
            font-weight: 700;
            color: #7c3aed;
        }

        .memory-cell.dec {
            font-family: 'DM Sans', monospace;
            font-size: 1rem;
            font-weight: 700;
            color: #059669;
        }

        .address-label {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: #4C3BCF;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .ascii-table {
            grid-column: 1 / -1;
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            max-height: 300px;
            overflow-y: auto;
        }

        .ascii-table h3 {
            font-family: 'Space Grotesk', sans-serif;
            margin-bottom: 15px;
            color: #1e293b;
        }

        .ascii-grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 4px;
            font-family: 'DM Sans', monospace;
            font-size: 0.85rem;
        }

        .ascii-cell {
            padding: 8px 4px;
            text-align: center;
            border: 1px solid #e2e8f0;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 4px;
        }

        .ascii-cell:hover,
        .ascii-cell.highlight {
            background: #3b82f6;
            color: white;
        }

        .drag-info {
            grid-column: 1 / -1;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 12px;
            border: 2px dashed #f59e0b;
        }

        .status {
            grid-column: 1 / -1;
            padding: 15px;
            background: #10b981;
            color: white;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
        }

        @media (max-width: 767px) {
            .content {
                padding: 20px;
                gap: 20px;
            }
            
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ASCII Memory Visualizer</h1>
            <p>Watch how computers store your text as binary codes in RAM. Type to see characters transform into **binary**, **hex**, **decimal**, and back to text!</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <div class="input-group">
                    <label for="textInput">Type text to store in memory:</label>
                    <input type="text" id="textInput" placeholder="Type here... (max 16 chars)" maxlength="16" value="Hello">
                </div>
                
                <div class="controls">
                    <div class="toggle-btn active" data-mode="char">Character</div>
                    <div class="toggle-btn" data-mode="hex">Hex</div>
                    <div class="toggle-btn" data-mode="dec">Decimal</div>
                    <div class="toggle-btn" data-mode="binary">Binary</div>
                </div>
            </div>

            <div class="memory-view">
                <div class="memory-grid" id="memoryGrid"></div>
            </div>

            <div class="drag-info">
                <strong>âœ¨ Interactive!</strong> Drag characters from memory cells or click ASCII table cells to see encoding in action.
            </div>

            <div class="ascii-table" id="asciiTable" style="display: none;">
                <h3>ASCII Table (0-127) - Click any character!</h3>
                <div class="ascii-grid" id="asciiGrid"></div>
            </div>

            <div class="status" id="status" style="display: none;"></div>
        </div>
    </div>

    <script>
        // Vibrant UI Colors (hardcoded for robustness)
        const COLORS = {
            bg: '#FEFBF6',
            primary: '#4C3BCF',
            accent: '#FF6B6B',
            blue: '#3b82f6',
            purple: '#a855f7',
            teal: '#14b8a6',
            orange: '#f97316',
            green: '#10b981'
        };

        // ASCII table data (0-127)
        const ASCII_TABLE = {};
        for (let i = 0; i <= 127; i++) {
            ASCII_TABLE[i] = String.fromCharCode(i);
        }

        let currentMode = 'char';
        let memoryData = [];
        let dragCell = null;

        function init() {
            setupEventListeners();
            generateMemoryGrid();
            generateASCIITable();
            updateMemoryView();
            showStatus('Ready! Type text to see ASCII encoding in memory.');
        }

        function setupEventListeners() {
            const input = document.getElementById('textInput');
            const toggles = document.querySelectorAll('.toggle-btn');
            const memoryGrid = document.getElementById('memoryGrid');

            // Input handler
            input.addEventListener('input', updateFromInput);

            // Toggle buttons
            toggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    toggles.forEach(t => t.classList.remove('active'));
                    toggle.classList.add('active');
                    currentMode = toggle.dataset.mode;
                    updateMemoryView();
                });
            });

            // Drag and drop
            memoryGrid.addEventListener('dragstart', handleDragStart);
            memoryGrid.addEventListener('dragover', handleDragOver);
            memoryGrid.addEventListener('drop', handleDrop);
        }

        function updateFromInput() {
            const text = document.getElementById('textInput').value.slice(0, 16);
            memoryData = Array.from(text).map(char => ({
                char,
                code: char.charCodeAt(0),
                hex: char.charCodeAt(0).toString(16).toUpperCase().padStart(2, '0'),
                binary: char.charCodeAt(0).toString(2).padStart(8, '0'),
                decimal: char.charCodeAt(0)
            }));
            
            // Pad with empty cells
            while (memoryData.length < 16) {
                memoryData.push({ char: '', code: 0, hex: '00', binary: '00000000', decimal: 0 });
            }
            
            updateMemoryView();
            highlightASCIICodes();
        }

        function generateMemoryGrid() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement('div');
                cell.className = 'memory-cell';
                cell.dataset.index = i;
                cell.draggable = true;
                
                const address = document.createElement('div');
                address.className = 'address-label';
                address.textContent = `0x${(100 + i).toString(16).toUpperCase()}`;
                cell.appendChild(address);
                
                grid.appendChild(cell);
            }
        }

        function updateMemoryView() {
            const cells = document.querySelectorAll('.memory-cell');
            
            cells.forEach((cell, i) => {
                const data = memoryData[i] || { char: '', code: 0 };
                cell.classList.toggle('used', data.char !== '');
                
                // Clear content
                cell.innerHTML = '';
                
                // Re-add address label
                const address = document.createElement('div');
                address.className = 'address-label';
                address.textContent = `0x${(100 + i).toString(16).toUpperCase()}`;
                cell.appendChild(address);
                
                // Add content based on mode
                let content;
                switch (currentMode) {
                    case 'char':
                        content = data.char || '?';
                        cell.classList.add('char');
                        break;
                    case 'hex':
                        content = data.hex || '00';
                        cell.classList.add('hex');
                        break;
                    case 'dec':
                        content = data.decimal || '0';
                        cell.classList.add('dec');
                        break;
                    case 'binary':
                        content = data.binary || '00000000';
                        cell.classList.add('binary');
                        break;
                }
                
                const contentEl = document.createElement('div');
                contentEl.textContent = content;
                cell.appendChild(contentEl);
            });
        }

        function generateASCIITable() {
            const grid = document.getElementById('asciiGrid');
            grid.innerHTML = '';
            
            for (let i = 32; i <= 127; i++) { // Printable characters
                const cell = document.createElement('div');
                cell.className = 'ascii-cell';
                cell.innerHTML = `<span>${ASCII_TABLE[i]}</span><br><small>${i.toString(16).toUpperCase()}</small>`;
                cell.dataset.code = i;
                
                cell.addEventListener('click', (e) => {
                    const char = ASCII_TABLE[i];
                    document.getElementById('textInput').value += char;
                    updateFromInput();
                    cell.classList.add('highlight');
                    setTimeout(() => cell.classList.remove('highlight'), 500);
                });
                
                grid.appendChild(cell);
            }
        }

        function highlightASCIICodes() {
            document.querySelectorAll('.ascii-cell').forEach(cell => {
                cell.classList.remove('highlight');
                const code = parseInt(cell.dataset.code);
                if (memoryData.some(data => data.code === code)) {
                    cell.classList.add('highlight');
                }
            });
        }

        // Drag and drop handlers
        function handleDragStart(e) {
            const cell = e.target.closest('.memory-cell');
            if (cell && memoryData[cell.dataset.index]?.char) {
                dragCell = cell.dataset.index;
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', cell.dataset.index);
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetIndex = e.target.closest('.memory-cell')?.dataset.index;
            if (dragCell !== null && targetIndex !== undefined && dragCell !== targetIndex) {
                // Swap characters
                [memoryData[dragCell], memoryData[targetIndex]] = 
                [memoryData[targetIndex], memoryData[dragCell]];
                
                // Update input
                document.getElementById('textInput').value = memoryData.slice(0, 16).map(d => d.char).join('');
                updateMemoryView();
                showStatus('ðŸ”„ Characters swapped in memory!');
            }
            dragCell = null;
        }

        function showStatus(message) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.display = 'block';
            setTimeout(() => {
                status.style.display = 'none';
            }, 2000);
        }

        // Toggle ASCII table visibility on double-click memory
        document.getElementById('memoryGrid').addEventListener('dblclick', () => {
            const table = document.getElementById('asciiTable');
            table.style.display = table.style.display === 'none' ? 'block' : 'none';
        });

        // Initialize immediately (no window.onload)
        init();
    </script>
</body>
</html>